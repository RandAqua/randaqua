"use client";

import { useEffect, useState } from 'react';
import Navbar from '../components/layout/Navbar';
import AuthModal from '../components/auth/AuthModal';

export default function Home() {
  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);
  const [authModalTab, setAuthModalTab] = useState('login');

  useEffect(() => {
    const onEsc = (e) => {
      if (e.key === 'Escape') setIsAuthModalOpen(false);
    };
    if (isAuthModalOpen) document.addEventListener('keydown', onEsc);
    return () => document.removeEventListener('keydown', onEsc);
  }, [isAuthModalOpen]);

  const openAuthModal = (tab = 'login') => {
    setAuthModalTab(tab);
    setIsAuthModalOpen(true);
  };

  const closeAuthModal = () => setIsAuthModalOpen(false);

  return (
    <div className="min-h-screen aqua-background">
      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <div className={`main-content ${isAuthModalOpen ? 'blur' : ''}`}>
        <Navbar onLoginClick={openAuthModal} />
        
        {/* –ì–µ—Ä–æ–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è AquaRNG */}
        <section className="aqua-hero-section">
          <div className="aqua-fish-background">
            {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä—ã–±–∫–∏ */}
            <div className="aqua-fish-1">üêü</div>
            <div className="aqua-fish-2">üê†</div>
            <div className="aqua-fish-3">üê°</div>
            <div className="aqua-fish-4">üêô</div>
            <div className="aqua-fish-5">ü¶à</div>
            <div className="aqua-fish-6">üêö</div>
            <div className="aqua-fish-7">ü¶Ä</div>
            <div className="aqua-fish-8">üê¢</div>
            <div className="aqua-fish-9">ü¶ë</div>
            <div className="aqua-fish-10">üêã</div>
            <div className="aqua-fish-11">üê†</div>
            <div className="aqua-fish-12">üêü</div>
            <div className="aqua-fish-13">ü¶ë</div>
            <div className="aqua-fish-14">üêö</div>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 aqua-text-container">
              <div className="text-center">
                <h1 className="aqua-main-title">
                  <span className="aqua-title-line1">–ò—Å—Ç–∏–Ω–Ω–∞—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å</span>
                  <span className="aqua-title-line2">–∏–∑ –≥–ª—É–±–∏–Ω –æ–∫–µ–∞–Ω–∞</span>
                </h1>
                <p className="aqua-hero-description">
                  –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –º–æ—Ä—Å–∫–æ–π –∂–∏–∑–Ω—å—é. 
                  –ö–∞–º–µ—Ä—ã –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ä—ã–±–∞–º–∏ —Å–æ–∑–¥–∞—é—Ç –∏—Å—Ç–∏–Ω–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞ –¥–ª—è –≤–∞—à–∏—Ö –Ω—É–∂–¥.
                </p>
                <div className="flex justify-center space-x-4 mt-8">
                  <button className="aqua-generate-btn">
                    <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clipRule="evenodd"/>
                    </svg>
                    –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ
                  </button>
                  <button className="aqua-how-btn">
                    <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clipRule="evenodd"/>
                    </svg>
                    –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Äî –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ .main-content */}
      <AuthModal 
        isOpen={isAuthModalOpen}
        onClose={closeAuthModal}
        initialTab={authModalTab}
      />
    </div>
  );
}